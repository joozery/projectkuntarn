# р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Др╕бр╣Ир╕лр╕бр╕Ф

## р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ

р╣Бр╕бр╣Йр╕зр╣Ир╕▓р╕Ир╕░р╣Гр╕Кр╣Й `getAll: true` р╣Бр╕ер╣Йр╕з р╣Бр╕Хр╣Ир╕вр╕▒р╕Зр╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕бр╕▓р╣Др╕Фр╣Й р╕вр╕▒р╕Зр╕Др╕Зр╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕│р╕Бр╕▒р╕Ф

## р╕кр╕▓р╣Ар╕лр╕Хр╕╕р╕Вр╕нр╕Зр╕Ыр╕▒р╕Нр╕лр╕▓

### 1. Backend р╕вр╕▒р╕Зр╣Гр╕Кр╣Й Default Filter р╣Бр╕бр╣Йр╣Ар╕бр╕╖р╣Ир╕н getAll=true
- р╣Бр╕бр╣Йр╕Ир╕░р╕кр╣Ир╕З `getAll: true` р╣Бр╕Хр╣И backend р╕вр╕▒р╕Зр╣Гр╕Кр╣Й default filter
- Default filter: `status = 'active' AND remaining_quantity1 > 0`
- р╕Чр╕│р╣Гр╕лр╣Йр╣Др╕Фр╣Йр╣Бр╕Др╣Ир╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣И active р╣Бр╕ер╕░р╕бр╕╡ stock р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

### 2. р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕г Debug Logging р╕Чр╕╡р╣Ир╣Ар╕Юр╕╡р╕вр╕Зр╕Юр╕н
- р╣Др╕бр╣Ир╣Ар╕лр╣Зр╕Щр╕зр╣Ир╕▓ API р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕ер╕▒р╕Ър╕бр╕▓р╣Ар╕Чр╣Ир╕▓р╣Др╕лр╕гр╣И
- р╣Др╕бр╣Ир╣Ар╕лр╣Зр╕Щр╕зр╣Ир╕▓ filter р╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╣Ир╕▓р╕Зр╣Др╕г

## р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В

### 1. р╣Бр╕Бр╣Йр╣Др╕В Backend API (backendkuntarn/routes/inventory.js)

#### р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕кр╕│р╕лр╕гр╕▒р╕Ъ getAll
```javascript
if (status && status !== 'all') {
  whereClause += ' AND i.status = ?';
  whereParams.push(status);
} else if (getAll === 'true' || getAll === true) {
  // р╕Цр╣Йр╕▓ getAll=true р╣Гр╕лр╣Йр╣Др╕бр╣Ир╣Гр╕Кр╣Й default filter р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╣Др╕Фр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
  console.log('ЁЯФН getAll=true: No default filter applied');
} else {
  // Default filter: only show active items with stock
  whereClause += ' AND i.status = "active" AND i.remaining_quantity1 > 0';
}
```

#### р╣Ар╕Юр╕┤р╣Ир╕б Debug Logging
```javascript
console.log('ЁЯФН Inventory API response debug:');
console.log('  - Query params:', { branchId, search, status, page, limit, getAll });
console.log('  - Total items in DB:', totalItems);
console.log('  - Items returned:', results.length);
console.log('  - Pagination:', { totalPages, offset, limit });
console.log('  - getAll parameter:', getAll);
```

**р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З:**
- р╣Ар╕бр╕╖р╣Ир╕н `getAll=true` р╕Ир╕░р╣Др╕бр╣Ир╣Гр╕Кр╣Й default filter
- р╣Др╕Фр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Гр╕Щ database
- р╣Ар╕Юр╕┤р╣Ир╕б debug logging р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

### 2. Frontend р╕Ир╕░ Filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕З
```javascript
// Frontend р╕Ир╕░ filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕Зр╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
const frontendFiltered = allInventory.filter(item => 
  item.status === 'active' && Number(item.remaining_quantity1) > 0
);
```

**р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З:**
- Backend р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕бр╕▓
- Frontend filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock

## р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╕Др╕▓р╕Фр╕лр╕зр╕▒р╕З

### 1. р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕╡р╣Ир╕бр╕╡р╣Гр╕Щр╕Др╕ер╕▒р╕З
- тЬЕ р╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╣Бр╕Др╣И 15 р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Бр╕гр╕Б
- тЬЕ р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock р╣Бр╕ер╕░ active (filtered by frontend)

### 2. Debug Information
- тЬЕ р╣Ар╕лр╣Зр╕Щр╕Ир╕│р╕Щр╕зр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Гр╕Щ database
- тЬЕ р╣Ар╕лр╣Зр╕Щр╕Ир╕│р╕Щр╕зр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕кр╣Ир╕Зр╕Бр╕ер╕▒р╕Ър╕бр╕▓
- тЬЕ р╣Ар╕лр╣Зр╕Щр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕З filter

### 3. р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- тЬЕ р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕лр╣Зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕╡р╣Ир╕бр╕╡ stock
- тЬЕ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Др╣Йр╕Щр╕лр╕▓р╣Бр╕ер╕░р╣Ар╕ер╕╖р╕нр╕Бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Др╕Фр╣Йр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ
- тЬЕ р╣Др╕бр╣Ир╕бр╕╡р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Фр╣Ар╕гр╕╖р╣Ир╕нр╕Зр╕Ир╕│р╕Щр╕зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓

## р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### 1. р╕Чр╕Фр╕кр╕нр╕Ъ Backend API р╣Вр╕Фр╕вр╕Хр╕гр╕З
```bash
# р╕Чр╕Фр╕кр╕нр╕Ъ API р╣Вр╕Фр╕вр╕Хр╕гр╕З
curl "http://localhost:3001/api/inventory?branchId=1&getAll=true"
```

### 2. р╕Чр╕Фр╕кр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щ Frontend
1. р╣Ар╕Ыр╕┤р╕Фр╕Яр╕нр╕гр╣Мр╕бр╕Чр╕│р╕кр╕▒р╕Нр╕Нр╕▓
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Console logs
3. р╕Фр╕╣р╕Ир╕│р╕Щр╕зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Вр╕лр╕ер╕Фр╕бр╕▓

### 3. р╕Чр╕Фр╕кр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щ Test Script
```bash
node test_inventory_debug.js
```

## р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

### Backend API Behavior
- **Default call**: р╣Гр╕Кр╣Й default filter (active + has stock) + pagination
- **getAll=true**: р╣Др╕бр╣Ир╣Гр╕Кр╣Й default filter, р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- **status=all**: р╣Др╕бр╣Ир╣Гр╕Кр╣Й default filter, р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### Frontend Processing
- р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Б backend
- Filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock
- р╣Бр╕кр╕Фр╕Зр╣Гр╕Щ SearchableSelectField

### Debug Logs
- Backend: р╣Бр╕кр╕Фр╕З query params, total items, items returned
- Frontend: р╣Бр╕кр╕Фр╕Зр╕Ир╕│р╕Щр╕зр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ър╣Бр╕ер╕░ filter р╣Бр╕ер╣Йр╕з

## р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕

- р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Щр╕╡р╣Йр╕Ир╕░р╕Чр╕│р╣Гр╕лр╣Йр╣Др╕Фр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Б database
- Frontend р╕Ир╕░ filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock
- Debug logging р╕Ир╕░р╕Кр╣Ир╕зр╕вр╣Гр╕Щр╕Бр╕▓р╕г troubleshoot р╕Ыр╕▒р╕Нр╕лр╕▓
- р╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Юр╕Фр╕╡р╕Вр╕╢р╣Йр╕Щр╣Ар╕Юр╕гр╕▓р╕░р╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕гр╕▒р╣Йр╕Зр╣Ар╕Фр╕╡р╕вр╕з
