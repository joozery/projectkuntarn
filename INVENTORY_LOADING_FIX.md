# р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╕Бр╕▓р╕гр╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Щр╕Яр╕нр╕гр╣Мр╕бр╕Чр╕│р╕кр╕▒р╕Нр╕Нр╕▓

## р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ

р╕Яр╕нр╕гр╣Мр╕бр╕Чр╕│р╕кр╕▒р╕Нр╕Нр╕▓р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Чр╕╡р╣Ир╣Ар╕лр╕ер╕╖р╕нр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕Др╕ер╕▒р╕Зр╣Гр╕Щр╕Кр╣Ир╕нр╕З "р╕Кр╕Щр╕┤р╕Фр╕кр╕┤р╕Щр╕Др╣Йр╕▓ *" р╣Бр╕бр╣Йр╕зр╣Ир╕▓р╕Ир╕░р╕бр╕╡р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Щр╕гр╕░р╕Ър╕Ъ

## р╕кр╕▓р╣Ар╕лр╕Хр╕╕р╕Вр╕нр╕Зр╕Ыр╕▒р╕Нр╕лр╕▓

### 1. Backend API р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕г Filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ Stock
- API р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕бр╕▓р╣Гр╕лр╣Й frontend
- р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕г filter р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ status = 'active' р╣Бр╕ер╕░ remaining_quantity1 > 0

### 2. Frontend р╕бр╕╡р╕Бр╕▓р╕г Comment Filter р╕нр╕нр╕Б
- р╣Гр╕Щ ContractForm р╕бр╕╡р╕Бр╕▓р╕г comment filter р╕нр╕нр╕Бр╣Др╕Ы
- р╕Чр╕│р╣Гр╕лр╣Йр╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕гр╕зр╕бр╕Цр╕╢р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡ stock

### 3. р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б
- р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Бр╕вр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Вр╕▓р╕вр╣Др╕Фр╣Й
- р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ stock р╕Бр╣Ир╕нр╕Щр╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╕Хр╕▒р╕зр╣Ар╕ер╕╖р╕нр╕Б

## р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В

### 1. р╣Бр╕Бр╣Йр╣Др╕В Backend API (backendkuntarn/routes/inventory.js)

#### р╣Ар╕Юр╕┤р╣Ир╕б Default Filter р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ Stock
```javascript
if (status && status !== 'all') {
  whereClause += ' AND i.status = ?';
  whereParams.push(status);
} else {
  // Default filter: only show active items with stock
  whereClause += ' AND i.status = "active" AND i.remaining_quantity1 > 0';
}
```

**р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З:**
- р╣Ар╕Юр╕┤р╣Ир╕б default filter р╕Чр╕╡р╣Ир╕Ир╕░р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ status = 'active' р╣Бр╕ер╕░ remaining_quantity1 > 0
- р╕Цр╣Йр╕▓р╕бр╕╡р╕Бр╕▓р╕гр╕кр╣Ир╕З status parameter р╕бр╕▓ р╕Ир╕░р╣Гр╕Кр╣Й filter р╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╕кр╣Ир╕Зр╕бр╕▓
- р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕кр╣Ир╕З status parameter р╕бр╕▓ р╕Ир╕░р╣Гр╕Кр╣Й default filter

### 2. р╣Бр╕Бр╣Йр╣Др╕В Frontend (src/components/forms/ContractForm.jsx)

#### р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ Filter р╣Гр╕Щ Frontend
```javascript
// р╣Ар╕Фр╕┤р╕б (comment р╕нр╕нр╕Б)
// .filter(item => item.status === 'active' && Number(item.remaining_quantity1) > 0)

// р╣Гр╕лр╕бр╣И (р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ)
.filter(item => item.status === 'active' && Number(item.remaining_quantity1) > 0)
```

**р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З:**
- р╣Ар╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ filter р╕Чр╕╡р╣И comment р╕нр╕нр╕Бр╣Др╕Ы
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ status = 'active' р╣Бр╕ер╕░ remaining_quantity1 > 0
- р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Вр╕▓р╕вр╣Др╕Фр╣Й

#### р╣Ар╕Юр╕┤р╣Ир╕б Debug Logging
```javascript
console.log('ЁЯФН ContractForm: Rendering product SearchableSelectField with:', {
  allInventoryCount: allInventory?.length || 0,
  filteredInventory: allInventory.filter(item => item.status === 'active' && Number(item.remaining_quantity1) > 0),
  activeWithQtyCount: allInventory.filter(item => item.status === 'active' && Number(item.remaining_quantity1) > 0).length,
  // ... more debug info
});
```

**р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З:**
- р╣Ар╕Юр╕┤р╣Ир╕б debug logging р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ
- р╣Бр╕кр╕Фр╕Зр╕Ир╕│р╕Щр╕зр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╣Ир╕нр╕Щр╣Бр╕ер╕░р╕лр╕ер╕▒р╕З filter
- р╕Кр╣Ир╕зр╕вр╣Гр╕Щр╕Бр╕▓р╕г troubleshoot р╕Ыр╕▒р╕Нр╕лр╕▓

## р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╕Др╕▓р╕Фр╕лр╕зр╕▒р╕З

### 1. р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓
- тЬЕ р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ status = 'active'
- тЬЕ р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ remaining_quantity1 > 0
- тЬЕ р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡ stock р╕лр╕гр╕╖р╕н inactive

### 2. р╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓
- тЬЕ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock р╣Др╕Фр╣Й
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ: р╕Кр╕╖р╣Ир╕н, р╕гр╕лр╕▒р╕к, р╕гр╕▓р╕Др╕▓
- тЬЕ р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡ stock р╣Гр╕Щр╕Ьр╕ер╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓

### 3. р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Вр╣Йр╕нр╕бр╕╣р╕е
- тЬЕ Backend р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Цр╕╣р╕Б filter р╣Бр╕ер╣Йр╕з
- тЬЕ Frontend р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
- тЬЕ р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕Зр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╣Бр╕ер╕░р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ

## р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### 1. р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓
1. р╣Ар╕Ыр╕┤р╕Фр╕Яр╕нр╕гр╣Мр╕бр╕Чр╕│р╕кр╕▒р╕Нр╕Нр╕▓
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Кр╣Ир╕нр╕З "р╕Кр╕Щр╕┤р╕Фр╕кр╕┤р╕Щр╕Др╣Йр╕▓" р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡ stock р╕лр╕гр╕╖р╕н inactive

### 2. р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓
1. р╕Др╕ер╕┤р╕Бр╕Чр╕╡р╣Ир╕Кр╣Ир╕нр╕З "р╕Кр╕Щр╕┤р╕Фр╕кр╕┤р╕Щр╕Др╣Йр╕▓"
2. р╕Юр╕┤р╕бр╕Юр╣Мр╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕Юр╕╖р╣Ир╕нр╕Др╣Йр╕Щр╕лр╕▓
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Ьр╕ер╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕бр╕╡ stock

### 3. р╕Чр╕Фр╕кр╕нр╕Ъ Debug Logging
1. р╣Ар╕Ыр╕┤р╕Ф Developer Tools (F12)
2. р╕Фр╕╣ Console tab
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ debug logs р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓

## р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

### Backend API Endpoint
- **URL**: `/api/inventory`
- **Method**: GET
- **Parameters**:
  - `branchId`: ID р╕Вр╕нр╕Зр╕кр╕▓р╕Вр╕▓
  - `status`: р╕кр╕Цр╕▓р╕Щр╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓ (optional)
  - `search`: р╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓ (optional)
  - `page`: р╕лр╕Щр╣Йр╕▓р╕Вр╣Йр╕нр╕бр╕╣р╕е (optional)
  - `limit`: р╕Ир╕│р╕Щр╕зр╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╣Ир╕нр╕лр╕Щр╣Йр╕▓ (optional)

### Frontend Component
- **File**: `src/components/forms/ContractForm.jsx`
- **Component**: `SearchableSelectField` р╕кр╕│р╕лр╕гр╕▒р╕Ъ "р╕Кр╕Щр╕┤р╕Фр╕кр╕┤р╕Щр╕Др╣Йр╕▓"
- **Filter**: `item.status === 'active' && Number(item.remaining_quantity1) > 0`

### Database Schema
- **Table**: `inventory`
- **Columns**:
  - `status`: р╕кр╕Цр╕▓р╕Щр╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓ ('active', 'inactive', 'sold')
  - `remaining_quantity1`: р╕Ир╕│р╕Щр╕зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Ар╕лр╕ер╕╖р╕н
  - `product_name`: р╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓
  - `product_code`: р╕гр╕лр╕▒р╕кр╕кр╕┤р╕Щр╕Др╣Йр╕▓

## р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕

- р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Щр╕╡р╣Йр╕Ир╕░р╕Чр╕│р╣Гр╕лр╣Йр╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Вр╕▓р╕вр╣Др╕Фр╣Й
- р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡ stock р╕лр╕гр╕╖р╕н inactive
- Debug logging р╕Ир╕░р╕Кр╣Ир╕зр╕вр╣Гр╕Щр╕Бр╕▓р╕г troubleshoot р╕Ыр╕▒р╕Нр╕лр╕▓р╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Х
- р╕Бр╕▓р╕г filter р╕Чр╕▒р╣Йр╕Зр╣Гр╕Щ backend р╣Бр╕ер╕░ frontend р╕Ир╕░р╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╣Бр╕ер╕░р╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в
